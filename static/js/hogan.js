/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

var Hogan={};(function(g,v){function u(a){return String(null===a||void 0===a?"":a)}g.Template=function(a,b,f,c){this.r=a||this.r;this.c=f;this.options=c;this.text=b||"";this.buf=v?[]:""};g.Template.prototype={r:function(){return""},v:function(a){a=u(a);return y.test(a)?a.replace(x,"&amp;").replace(n,"&lt;").replace(q,"&gt;").replace(t,"&#39;").replace(z,"&quot;"):a},t:u,render:function(a,b,f){return this.ri([a],b||{},f)},ri:function(a,b,f){return this.r(a,b,f)},rp:function(a,b,f,c){a=f[a];if(!a)return"";this.c&&"string"==typeof a&&(a=this.c.compile(a,this.options));return a.ri(b,f,c)},rs:function(a,b,f){var c=a[a.length-1];if(w(c))for(var h=0;h<c.length;h++)a.push(c[h]),f(a,b,this),a.pop();else f(a,b,this)},s:function(a,b,f,c,h,d,m){if(w(a)&&0===a.length)return!1;"function"==typeof a&&(a=this.ls(a,b,f,c,h,d,m));f=""===a||!!a;!c&&(f&&b)&&b.push("object"==typeof a?a:b[b.length-1]);return f},d:function(a,b,f,c){var h=a.split("."),d=this.f(h[0],b,f,c),m=null;if("."===a&&w(b[b.length-2]))return b[b.length-1];for(a=1;a<h.length;a++)d&&"object"==typeof d&&h[a]in d?(m=d,d=d[h[a]]):d="";if(c&&!d)return!1;!c&&"function"==typeof d&&(b.push(m),d=this.lv(d,b,f),b.pop());return d},f:function(a,b,f,c){for(var h=!1,d=null,m=!1,e=b.length-1;0<=e;e--)if((d=b[e])&&"object"==typeof d&&a in d){h=d[a];m=!0;break}if(!m)return c?!1:"";!c&&"function"==typeof h&&(h=this.lv(h,b,f));return h},ho:function(a,b,f,c,h){var d=this.c,m=this.options;m.delimiters=h;c=a.call(b,c);c=null==c?String(c):c.toString();this.b(d.compile(c,m).render(b,f));return!1},b:v?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:v?function(){var a=this.buf.join("");this.buf=[];return a}:function(){var a=this.buf;this.buf="";return a},ls:function(a,b,f,c,h,d,m){b=b[b.length-1];var e=null;if(!c&&this.c&&0<a.length)return this.ho(a,b,f,this.text.substring(h,d),m);e=a.call(b);if("function"==typeof e){if(c)return!0;if(this.c)return this.ho(e,b,f,this.text.substring(h,d),m)}return e},lv:function(a,b,f){b=b[b.length-1];a=a.call(b);return"function"==typeof a&&(a=u(a.call(b)),this.c&&~a.indexOf("{{"))?this.c.compile(a,this.options).render(b,f):u(a)}};var x=/&/g,n=/</g,q=/>/g,t=/\'/g,z=/\"/g,y=/[&<>\"\']/,w=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}})("undefined"!==typeof exports?exports:Hogan);(function(g){function v(c){return c.trim?c.trim():c.replace(/^\s*|\s*$/g,"")}function u(c,a,d){if(a.charAt(d)!=c.charAt(0))return!1;for(var b=1,e=c.length;b<e;b++)if(a.charAt(d+b)!=c.charAt(b))return!1;return!0}function x(c,a,d,b){a=[];for(var e=null,f=null;0<c.length;){f=c.shift();if(!(e="#"==f.tag))if(!(e="^"==f.tag))a:{for(var e=f,g=b,k=0,p=g.length;k<p;k++)if(g[k].o==e.n){e.tag="#";e=!0;break a}e=void 0}if(e)d.push(f),f.nodes=x(c,f.tag,d,b);else if("/"==f.tag){if(0===d.length)throw Error("Closing tag without opener: /"+f.n);e=d.pop();if(c=f.n!=e.n){a:{c=0;for(d=b.length;c<d;c++)if(b[c].c==f.n&&b[c].o==e.n){b=!0;break a}b=void 0}c=!b}if(c)throw Error("Nesting error: "+e.n+" vs. "+f.n);e.end=f.i;return a}a.push(f)}if(0<d.length)throw Error("missing closing tag: "+d.pop().n);return a}function n(c){return c.replace(b,"\\\\").replace(y,'\\"').replace(w,"\\n").replace(a,"\\r")}function q(c){return~c.indexOf(".")?"d":"f"}function t(c){for(var a="",d=0,b=c.length;d<b;d++){var e=c[d].tag;if("#"==e)var e=c[d].nodes,f=q(c[d].n),g=c[d].i,k=c[d].end,p=c[d].otag+" "+c[d].ctag,e="if(_.s(_."+f+'("'+n(c[d].n)+'",c,p,1),c,p,0,'+g+","+k+',"'+p+'")){_.rs(c,p,function(c,p,_){'+t(e)+"});c.pop();}",a=a+e;else"^"==e?(e=c[d].nodes,e="if(!_.s(_."+q(c[d].n)+'("'+n(c[d].n)+'",c,p,1),c,p,1,0,0,"")){'+t(e)+"};",a+=e):"<"==e||">"==e?a+='_.b(_.rp("'+n(c[d].n)+'",c,p,"'+(c[d].indent||"")+'"));':"{"==e||"&"==e?(e="_.b(_.t(_."+q(c[d].n)+'("'+n(c[d].n)+'",c,p,0)));',a+=e):"\n"==e?a+='_.b("\\n"'+(c.length-1==d?"":" + i")+");":"_v"==e?(e="_.b(_.v(_."+q(c[d].n)+'("'+n(c[d].n)+'",c,p,0)));',a+=e):void 0===e&&(e='"'+n(c[d])+'"',a+="_.b("+e+");")}return a}var z=/\S/,y=/\"/g,w=/\n/g,a=/\r/g,b=/\\/g,f={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};g.scan=function(a,b){function d(){0<p.length&&(l.push(new String(p)),p="")}function m(a,c){d();var b;if(b=a)a:{b=!0;for(var e=t;e<l.length;e++)if(b=l[e].tag&&f[l[e].tag]<f._v||!l[e].tag&&null===l[e].match(z),!b){b=!1;break a}}if(b){b=t;for(var h;b<l.length;b++)if(!l[b].tag){if((h=l[b+1])&&">"==h.tag)h.indent=l[b].toString();l.splice(b,1)}}else c||l.push({tag:"\n"});q=!1;t=l.length}var e=a.length,g=0,n=null,k=null,p="",l=[],q=!1,j=0,t=0,s="{{",r="}}";b&&(b=b.split(" "),s=b[0],r=b[1]);for(j=0;j<e;j++)0==g?u(s,a,j)?(--j,d(),g=1):"\n"==a.charAt(j)?m(q):p+=a.charAt(j):1==g?(j+=s.length-1,n=(k=f[a.charAt(j+1)])?a.charAt(j+1):"_v","="==n?(s=a,k=j,j="="+r,g=s.indexOf(j,k),r=v(s.substring(s.indexOf("=",k)+1,g)).split(" "),s=r[0],r=r[1],j=g+j.length-1,g=0):(k&&j++,g=2),q=j):u(r,a,j)?(l.push({tag:n,n:v(p),otag:s,ctag:r,i:"/"==n?q-r.length:j+s.length}),p="",j+=r.length-1,g=0,"{"==n&&("}}"==r?j++:(k=l[l.length-1],"}"===k.n.substr(k.n.length-1)&&(k.n=k.n.substring(0,k.n.length-1))))):p+=a.charAt(j);m(q,!0);return l};g.generate=function(a,b,d){a='var _=this;_.b(i=i||"");'+t(a)+"return _.fl();";return d.asString?"function(c,p,i){"+a+";}":new g.Template(new Function("c","p","i",a),b,g,d)};g.parse=function(a,b,d){d=d||{};return x(a,"",[],d.sectionTags||[])};g.cache={};g.compile=function(a,b){b=b||{};var d=a+"||"+!!b.asString,f=this.cache[d];if(f)return f;f=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b);return this.cache[d]=f}})("undefined"!==typeof exports?exports:Hogan);
